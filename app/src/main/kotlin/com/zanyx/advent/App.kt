/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package com.zanyx.advent

import com.zanyx.advent.analyser.TerminalAnalyzer
import com.zanyx.advent.terminal.Terminal
import java.io.File

fun main() {
    val fileSystem =
        TerminalAnalyzer(Terminal(stream = File("input.txt").bufferedReader()))
            .discoverFileSystemStructure()
    val freeSpace = 70000000L - fileSystem.root.size
    val spaceToBeFreed = 30000000 - freeSpace
    println(fileSystem.directories.map { it.size }.filter { it >= spaceToBeFreed }.min())
}
